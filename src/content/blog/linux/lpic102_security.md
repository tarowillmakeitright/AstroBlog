---
author: Taro Gray
pubDatetime: 2025-05-04T08:00:00.000Z
title: セキュリティ(主題110)
postSlug: lpic102_security
featured: true
ogImage: https://github.com/satnaing/astro-paper/assets/53733092/1ef0cf03-8137-4d67-ac81-84a032119e3a
tags:
  - Linux
description: セキュリティ(主題110)
---

## Table of Contents

## あるユーザが root権限でアプリケーションを実行できるかどうかを判断するとき、sudoが読み込む設定ファイルは何ですか？（1つ選択）

### 問題

あるユーザが `root` 権限でアプリケーションを実行できるかどうかを判断するとき、`sudo` が読み込む設定ファイルはどれですか？**1つ選びなさい。**

---

### 選択肢

- A. `/etc/sudoers`
- B. `/etc/sudo.conf`
- C. `/etc/passwd`

---

### 正解

✅ **A. /etc/sudoers**

---

### 解説

| 選択肢 | 正誤 | 解説                                                                                                                                                          |
| ------ | ---- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| A      | ✅   | `/etc/sudoers` は、`sudo` コマンドがどのユーザにどのコマンドの実行を許可するかを定義する設定ファイルです。`visudo` コマンドを使って編集するのが推奨されます。 |
| B      | ❌   | `/etc/sudo.conf` は `sudo` の動作に関する設定を行うファイルですが、ユーザの権限そのものには関係しません。                                                     |
| C      | ❌   | `/etc/passwd` はユーザ情報（ユーザ名、UID、ホームディレクトリなど）を保持するファイルであり、`sudo` 権限の有無とは直接関係ありません。                        |

---

### 使用例

```bash
# /etc/sudoers の内容を確認（読み取り専用で）
sudo cat /etc/sudoers

# visudo を使って安全に編集
sudo visudo
```

## xinetdの設定ファイル名を絶対パスで記述してください

### 問題

`xinetd` の設定ファイルはどこにありますか？**絶対パス**で記述してください。

---

### 正解

✅ **/etc/xinetd.conf**

---

### 解説

`xinetd`（Extended Internet Service Daemon）は、インターネット経由でアクセスされるサービスを制御するためのスーパーサーバです。そのメイン設定ファイルは `/etc/xinetd.conf` にあり、個別のサービス設定は `/etc/xinetd.d/` ディレクトリ内のファイルで行われます。

---

### 使用例

```bash
# xinetd の設定ファイルを表示
cat /etc/xinetd.conf

# 各サービスごとの設定は以下に配置
ls /etc/xinetd.d/
```

## xinetdの設定ファイルを編集した後、再起動せずに変更を有効にするためのシグナルは？

### 問題

`xinetd` の設定ファイルを編集した後、**デーモンの再起動をせずに**変更を反映させるには、`kill` や `pkill` コマンドでどのシグナルを送ればよいですか？**シグナルの名前のみ**を記述してください。

---

### 正解

✅ **SIGHUP**

---

### 解説

`SIGHUP`（ハングアップシグナル）は、多くのデーモンが**設定ファイルの再読み込み**の合図として使用する標準的なシグナルです。`xinetd` もこれに従っており、`SIGHUP` を送信することで、プロセスを再起動せずに設定変更を反映できます。

---

### 使用例

```bash
# プロセスIDを指定して SIGHUP を送信
sudo kill -HUP $(pidof xinetd)

# プロセス名を指定して SIGHUP を送信
sudo pkill -HUP xinetd
```

## xinetd設定ファイルで、サービスを提供するために使われるネットワークアドレスを指定する属性名は？

### 問題

`xinetd` の設定ファイルにおいて、**サービスを提供するために使われるネットワークアドレス**を指定するための**属性名**を記述してください。

---

### 正解

✅ **bind**

---

### 解説

`bind` 属性は、`xinetd` のサービス定義において、そのサービスが**どのIPアドレスで待ち受けるか**を指定するために使われます。これにより、特定のネットワークインターフェースのみにバインドすることが可能になります。

---

### 使用例

```bash
# /etc/xinetd.d/example_service における bind の使用例
service example
{
    socket_type = stream
    protocol    = tcp
    wait        = no
    user        = root
    server      = /usr/sbin/example
    bind        = 192.168.1.100
    disable     = no
}
```

## TCP Wrapperによって特定のサービスだけを許可したい場合、設定するファイルはどれですか？（3つ選択）

### 問題

TCP Wrapper を使用して特定のサービスへのアクセスを制御したい場合、どのファイルを使用して設定しますか？**3つ選びなさい。**

---

### 選択肢

- A. `hosts`
- B. `hosts.allow`
- C. `hosts.deny`
- D. `hosts.deny` と `hosts.allow`

---

### 正解

✅ **B. hosts.allow**  
✅ **C. hosts.deny**  
✅ **D. hosts.deny と hosts.allow**

---

### 解説

| 選択肢 | 正誤 | 解説                                                                                       |
| ------ | ---- | ------------------------------------------------------------------------------------------ |
| A      | ❌   | `hosts` という名前のファイルは TCP Wrapper には関係ありません。                            |
| B      | ✅   | `hosts.allow` はアクセスを「許可」するサービスやホストを記述するファイルです。             |
| C      | ✅   | `hosts.deny` はアクセスを「拒否」するサービスやホストを記述するファイルです。              |
| D      | ✅   | `hosts.allow` と `hosts.deny` の**両方**を使うことで、詳細なアクセス制御が可能になります。 |

TCP Wrapper はサービスの起動前にクライアントの接続元をチェックし、`hosts.allow` → `hosts.deny` の順に評価します。

---

### 使用例

```bash
# /etc/hosts.allow にて sshd へのアクセスを許可
sshd: 192.168.1.

# /etc/hosts.deny にてデフォルトですべて拒否
ALL: ALL
```

## unameとはなんですか？

### 問題

`uname` コマンドについて説明してください。

---

### 解答

✅ `uname` は、**システムに関する情報（カーネル名、バージョン、マシンタイプなど）を表示するコマンド**です。

---

### 解説

`uname` は、現在動作しているシステムの基本情報を取得するために使われます。特に、カーネルの種類やバージョン、ホスト名、ハードウェアの種類などを確認する際に役立ちます。

よく使われるオプションには以下があります：

| オプション | 説明                                                 |
| ---------- | ---------------------------------------------------- |
| `-a`       | すべての情報をまとめて表示する                       |
| `-s`       | カーネル名を表示する（デフォルト動作）               |
| `-r`       | カーネルのリリース番号を表示する                     |
| `-v`       | カーネルのバージョンを表示する                       |
| `-m`       | マシンのハードウェア名（例: x86_64）を表示する       |
| `-n`       | ネットワークノードのホスト名を表示する               |
| `-p`       | プロセッサの種類を表示する（利用できない場合もあり） |

---

### 使用例

```bash
# カーネル名だけを表示
uname

# カーネル名、バージョン、ホスト名などすべてを表示
uname -a

# マシンのハードウェア情報を表示
uname -m
```

## TCP Wrapperによるアクセス制御でアクセスの拒否を設定するファイルは何ですか？（1つ選択）

### 問題

TCP Wrapper を使ってサービスへの**アクセスを拒否**する設定を行いたい。設定すべきファイルはどれか？**1つ選びなさい。**

---

### 選択肢

- A. `/etc/services`
- B. `/etc/hosts.allow`
- C. `/etc/tcpwrapper.conf`
- D. `/etc/hosts.deny`
- E. `/etc/inetd.conf`

---

### 正解

✅ **D. /etc/hosts.deny**

---

### 解説

| 選択肢 | 正誤 | 解説                                                                                                   |
| ------ | ---- | ------------------------------------------------------------------------------------------------------ |
| A      | ❌   | `/etc/services` は、ポート番号とサービス名の対応を定義するファイルで、アクセス制御には関係ありません。 |
| B      | ❌   | `/etc/hosts.allow` はアクセスを「許可」するホストやサービスを定義します。                              |
| C      | ❌   | `tcpwrapper.conf` というファイルは存在しません（誤り）。                                               |
| D      | ✅   | `/etc/hosts.deny` にアクセスを拒否する設定を記述します。`hosts.allow` より後に評価されます。           |
| E      | ❌   | `/etc/inetd.conf` は古い inetd サービスの設定ファイルで、直接アクセス制御は行いません。                |

---

### 使用例

```bash
# すべてのホストからのすべてのサービスへのアクセスを拒否する設定
ALL: ALL
# sshd を特定のIPアドレスからのみ許可したい場合は hosts.allow に記述
```

## 一般的にTCP Wrapperで保護されないものはどれですか？（1つ選択）

### 問題

次のうち、**一般的に TCP Wrapper によるアクセス制御の対象とならないサービス**はどれですか？**1つ選びなさい。**

---

### 選択肢

- A. `ftp`
- B. `auth`
- C. `http`
- D. `telnet`

---

### 正解

✅ **C. http**

---

### 解説

TCP Wrapper は、**libwrap に対応しているサービス**のみアクセス制御が可能です。多くの古典的なデーモン（`ftpd`, `telnetd`, `rlogind`, `sshd` など）は TCP Wrapper に対応していますが、**Apache（httpd）などのHTTPサーバは一般的にTCP Wrapperに対応していません**。

| サービス | TCP Wrapper対応 | 補足                                                                                    |
| -------- | --------------- | --------------------------------------------------------------------------------------- |
| ftp      | ✅ 対応あり     | `vsftpd`, `proftpd` など多くが対応                                                      |
| auth     | ✅ 対応あり     | identd として動作することがある                                                         |
| http     | ❌ 非対応       | Apacheなどのhttpサーバは対応していない（代わりに `iptables` や `.htaccess` などで制御） |
| telnet   | ✅ 対応あり     | 古典的なリモート接続手段                                                                |

---

### 使用例

```bash
# /etc/hosts.deny にてすべてのサービスを拒否
ALL: ALL

# /etc/hosts.allow にて telnet のみ許可
telnet: 192.168.1.0/255.255.255.0
```

## 公開鍵暗号と公開鍵認証についての説明で正しいものはどれですか？（3つ選択）

### 問題

公開鍵暗号と公開鍵認証についての次の説明のうち、**正しいものを3つ選びなさい。**

---

### 選択肢

- A. 公開鍵暗号で使われる秘密鍵と公開鍵は1対多の対応である
- B. 公開鍵暗号で使われる公開鍵は秘密鍵から算出される
- C. 公開鍵暗号では公開鍵で暗号化し、秘密鍵で復号する
- D. 公開鍵暗号では秘密鍵で暗号化し、公開鍵で復号する
- E. 公開鍵認証では公開鍵で認証データを作成し、秘密鍵で検証する
- F. 公開鍵認証では秘密鍵で認証データを作成し、公開鍵で検証する

---

### 正解

✅ **B. 公開鍵暗号で使われる公開鍵は秘密鍵から算出される**  
✅ **C. 公開鍵暗号では公開鍵で暗号化し、秘密鍵で復号する**  
✅ **F. 公開鍵認証では秘密鍵で認証データを作成し、公開鍵で検証する**

---

### 解説

| 選択肢 | 正誤 | 解説                                                                                                         |
| ------ | ---- | ------------------------------------------------------------------------------------------------------------ |
| A      | ❌   | 公開鍵と秘密鍵は「1対1」のペアで使用される。1つの秘密鍵に対して複数の公開鍵があるわけではない。              |
| B      | ✅   | 公開鍵は、秘密鍵から一方向的に算出される。逆算は困難。                                                       |
| C      | ✅   | 公開鍵で暗号化し、対応する秘密鍵で復号することで、安全な通信が可能。                                         |
| D      | ❌   | これは**デジタル署名**の動作に近いが、「暗号化」ではない。秘密鍵で暗号化する用途は通常の暗号通信とは異なる。 |
| E      | ❌   | 認証では**秘密鍵**で署名（認証データの作成）し、**公開鍵**でその正当性を検証する。順序が逆。                 |
| F      | ✅   | 公開鍵認証では、秘密鍵で署名した認証データを、対応する公開鍵で検証することで、本人確認が可能になる。         |

---

### まとめ

- 公開鍵暗号 → **公開鍵で暗号化 → 秘密鍵で復号**
- 公開鍵認証 → **秘密鍵で署名 → 公開鍵で検証**

## sshのファイルknown_hostsはどこに作られますか？（1つ選択）

### 問題

SSH の `known_hosts` ファイルは、どこに作成されますか？**1つ選びなさい。**

---

### 選択肢

- A. sshサーバ上
- B. sshクライアント上
- C. sshサーバとクライアント上
- D. 公開鍵サーバ上

---

### 正解

✅ **B. sshクライアント上**

---

### 解説

`known_hosts` ファイルは、**SSHクライアントが接続したことのあるサーバの情報（ホスト名・IP・公開鍵）を保存するファイル**であり、**クライアント側の `~/.ssh/` ディレクトリ**に作成されます。

初めてSSH接続を行う際、接続先サーバの公開鍵を信頼するかどうかを確認され、「yes」と答えるとそのサーバ情報が `known_hosts` に保存され、次回以降は確認を省略できます。

---

### 使用例

```bash
# ファイルの場所（ユーザごとに異なる）
~/.ssh/known_hosts

# グローバルな known_hosts（すべてのユーザに共通）
/etc/ssh/ssh_known_hosts
```

## /etc/ssh/ssh_known_hostsファイルには\_\_\_\_のホストキー（公開鍵）が含まれています。（1つ選択）

### 問題

`/etc/ssh/ssh_known_hosts` ファイルには、\_\_\_\_ のホストキー（公開鍵）が含まれています。下線部に当てはまる語句を1つ選びなさい。

---

### 選択肢

- A. システムのすべてのユーザが利用可能なサーバ
- B. ネットワークのすべてのユーザが利用可能なサーバ
- C. グループのすべてのユーザが利用可能なサーバ
- D. システム管理者のみが利用可能なサーバ

---

### 正解

✅ **A. システムのすべてのユーザが利用可能なサーバ**

---

### 解説

`/etc/ssh/ssh_known_hosts` は、**システム全体で共通して利用される known_hosts ファイル**です。ここには、すべてのユーザが共通で接続することがある信頼済みの SSH サーバのホストキー（公開鍵）が記録されており、**全ユーザに対して自動的に信頼される**設定として機能します。

これは、ユーザ個別の `~/.ssh/known_hosts` に記録されるエントリとは異なり、全体設定としての役割を持ちます。

---

### 使用例

```bash
# すべてのユーザが参照可能な known_hosts ファイル
cat /etc/ssh/ssh_known_hosts
```

## /etc/ssh/ssh_known_hostsのパーミッションはどれが適切ですか？（1つ選択）

### 問題

`/etc/ssh/ssh_known_hosts` の**適切なパーミッション**はどれか？**1つ選びなさい。**

---

### 選択肢

- A. rootのみがreadできる
- B. rootのみがreadとwriteできる
- C. すべてのユーザがreadできる
- D. すべてのユーザがwriteできる

---

### 正解

✅ **C. すべてのユーザがreadできる**

---

### 解説

`/etc/ssh/ssh_known_hosts` は、システム全体で共有される SSH サーバの公開鍵（ホストキー）を格納するファイルです。

このファイルの目的は、**すべてのユーザが信頼済みのサーバに対して確認なしで接続できるようにすること**なので、**全ユーザに読み取り可能である必要があります**。ただし、**書き込みは root のみに制限**されているべきです。

適切なパーミッションの例：

```bash
-rw-r--r--  1 root root  ... /etc/ssh/ssh_known_hosts
# パーミッションの確認
ls -l /etc/ssh/ssh_known_hosts

# rootのみ書き込み可、全ユーザ読み取り可に設定
sudo chmod 644 /etc/ssh/ssh_known_hosts
```

## rootがsshでログインできないようにするために、sshサーバの設定ファイルのディレクティブの記述で正しいものはどれですか？（1つ選択）

### 問題

`root` ユーザが SSH でログインできないようにするには、`sshd_config` ファイルにどのディレクティブを設定すればよいか？**1つ選びなさい。**

---

### 選択肢

- A. `PermitRootLogin yes`
- B. `PermitRootLogin no`
- C. `RootLogin yes`
- D. `NoPermitRootLogin yes`

---

### 正解

✅ **B. PermitRootLogin no**

---

### 解説

`/etc/ssh/sshd_config` において、

```bash
PermitRootLogin no

と設定することで、root ユーザが SSH でのログインを禁止されます。

設定値	意味
yes	rootログインを許可
no	rootログインを禁止
prohibit-password	パスワードによるrootログインのみ禁止（公開鍵認証は許可）
without-password（旧）	prohibit-password の旧表記
```

---

使用例

```
# /etc/ssh/sshd_config の一部
PermitRootLogin no

# 設定反映のための再起動
sudo systemctl restart sshd
```

## sshで外部サーバへ接続する際に使用するオプションを編集するユーザの設定ファイルは何ですか？

### 問題

SSH で外部サーバへ接続する際に使用するオプション（ホスト別の設定など）を編集する**ユーザ固有の設定ファイル**は何ですか？**ファイル名のみ**記述してください。

---

### 正解

✅ **config**

---

### 解説

ユーザごとの SSH 接続オプションは、次のファイルに記述します：

~/.ssh/config

このファイルでは、ホストごとにポート番号やユーザ名、使用する鍵ファイルなどを細かく設定することが可能です。

---

### 使用例（`~/.ssh/config`）

```bash
Host myserver
    HostName example.com
    Port 22
    User ubuntu
    IdentityFile ~/.ssh/id_rsa
```

## SSHが使用する認証用キーを生成するコマンドの名前を記述してください

### 問題

SSHで使用される**認証用の鍵ペア（公開鍵と秘密鍵）を生成するコマンド**の名前を記述してください。

---

### 正解

✅ **ssh-keygen**

---

### 解説

`ssh-keygen` コマンドは、SSH認証に使用される公開鍵と秘密鍵のペアを生成するためのコマンドです。生成された鍵は、SSH接続の際にクライアント認証として使用されます。

デフォルトでは、以下のようなファイルが作成されます：

- 秘密鍵：`~/.ssh/id_rsa`（または `id_ecdsa`, `id_ed25519` など）
- 公開鍵：`~/.ssh/id_rsa.pub`

---

### 使用例

```bash
# デフォルト設定でRSA鍵ペアを生成
ssh-keygen

# ed25519形式で鍵ペアを生成
ssh-keygen -t ed25519

# 出力ファイル名を指定して生成
ssh-keygen -f ~/.ssh/my_custom_key
```

## ユーザyukoが作成したecdsa鍵をexamserverに登録するファイルはどれですか？（1つ選択）

### 問題

ユーザ `yuko` がホスト `examhost` 上で `ecdsa` 鍵を作成しました。この鍵を使って `examhost` から `examserver` にログインできるようにするには、**`examserver` 側にどのファイルへ登録すればよいか？**1つ選びなさい。

---

### 選択肢

- A. `sshd_config`
- B. `authorized_keys`
- C. `id_ecdsa.pub`
- D. `id_ecdsa`

---

### 正解

✅ **B. authorized_keys**

---

### 解説

SSH公開鍵認証では、**クライアント側（ここでは `examhost`）で生成した公開鍵を、サーバ側（`examserver`）のユーザの `~/.ssh/authorized_keys` ファイルに登録**する必要があります。これにより、対応する秘密鍵を持つクライアントだけがログイン可能になります。

| ファイル名        | 説明                                                | 所在                                       |
| ----------------- | --------------------------------------------------- | ------------------------------------------ |
| `authorized_keys` | クライアントの公開鍵を登録するサーバ側のファイル    | `~/.ssh/authorized_keys`（`examserver`上） |
| `id_ecdsa`        | 秘密鍵（クライアント側で使用）                      | `~/.ssh/id_ecdsa`（`examhost`上）          |
| `id_ecdsa.pub`    | 公開鍵（サーバに渡す）                              | `~/.ssh/id_ecdsa.pub`（`examhost`上）      |
| `sshd_config`     | SSHサーバ全体の設定ファイルであり、鍵登録とは無関係 | `/etc/ssh/sshd_config`                     |

---

### 使用例

```bash
# examhost から公開鍵を examserver に登録（コマンドで自動転送）
ssh-copy-id -i ~/.ssh/id_ecdsa.pub yuko@examserver

# または手動で examserver の ~/.ssh/authorized_keys に追記
cat ~/.ssh/id_ecdsa.pub | ssh yuko@examserver "mkdir -p ~/.ssh && cat >> ~/.ssh/authorized_keys"
```

## sshクライアントがパスフレーズなしでログインするために秘密鍵の管理を行うプログラムはどれですか？（1つ選択）

### 問題

SSHクライアントがSSHサーバに接続する際、**パスフレーズを毎回入力することなくログインする**ために、秘密鍵の管理を行うプログラムはどれですか？**1つ選びなさい。**

---

### 選択肢

- A. `scp`
- B. `sshd`
- C. `ssh-agent`
- D. `ssh-keygen`

---

### 正解

✅ **C. ssh-agent**

---

### 解説

`ssh-agent` は、**SSH秘密鍵とそのパスフレーズを一時的にメモリ上に保持**し、以降のSSH接続時にユーザーが再びパスフレーズを入力しなくてもよくするためのプログラムです。

| プログラム名 | 役割                                             |
| ------------ | ------------------------------------------------ |
| `scp`        | SSH経由でファイルを転送するためのコマンド        |
| `sshd`       | SSHサーバ側のデーモン                            |
| `ssh-agent`  | 秘密鍵を保持・管理し、パスフレーズ入力を省略する |
| `ssh-keygen` | SSH鍵ペア（公開鍵・秘密鍵）を生成するコマンド    |

---

### 使用例

```bash
# ssh-agent を起動
eval $(ssh-agent)

# 秘密鍵を ssh-agent に登録（最初に一度だけパスフレーズを入力）
ssh-add ~/.ssh/id_ecdsa
```

## /binディレクトリ内で、一般ユーザが実行してもroot権限で実行されるファイルの一覧を表示したい場合、どのfindコマンドを実行すればよいですか？（1つ選択）

### 問題

`/bin` ディレクトリ内にあるファイルのうち、**一般ユーザが実行しても root 権限で動作する SUID（Set UID）付きのファイル**を検索したい。どの `find` コマンドが正しいか？**1つ選びなさい。**

---

### 選択肢

- A. `find /bin -uid 0 -perm /4000`
- B. `find -user -perm /4000 /bin`
- C. `find /bin -user -perm 4000`
- D. `find /bin -user 0 -perm 4000`
- E. `find -perm /4000 /bin`

---

### 正解

✅ **A. find /bin -uid 0 -perm /4000**

---

### 解説

- `-uid 0`：ファイルの所有者が root（UID 0）であることを意味します
- `-perm /4000`：SUID（Set UID）ビットが設定されているファイルを検索します。スラッシュ `/` を使うことで、「**少なくともこのパーミッションが含まれるファイル**」を検索できます（完全一致ではない）

したがって、`find /bin -uid 0 -perm /4000` は、

> 「所有者が root で、SUID ビットが付与されている `/bin` 配下のファイル」

を検索する正しいコマンドです。

---

### 使用例

```bash
# SUIDが付いたroot所有のコマンドを確認
find /bin -uid 0 -perm /4000
```

## 現在のディレクトリ以下にあるシンボリックリンクファイルを探すコマンドはどれですか？（1つ選択）

### 問題

現在のディレクトリ以下にある**すべてのシンボリックリンクファイル**を探すには、どのコマンドを使えばよいか？**1つ選びなさい。**

---

### 選択肢

- A. `locate -d . symlink`
- B. `locate symlink`
- C. `find . -type d`
- D. `find -type l`

---

### 正解

✅ **D. find -type l**

---

### 解説

- `-type l` は `find` コマンドのオプションで、「**シンボリックリンク（symbolic link）**」を検索対象に指定します。
- `find` はカレントディレクトリ（`.`）以下を探索するのが一般的なので、**正しいコマンドは** `find . -type l` です。

| コマンド | 説明                                                                  | 正誤 |
| -------- | --------------------------------------------------------------------- | ---- |
| A        | `locate` はデータベース検索。`-d .` の指定は誤用                      | ❌   |
| B        | `locate` は `updatedb` の更新が必要なため、リアルタイム検索には不向き | ❌   |
| C        | `-type d` はディレクトリを検索                                        | ❌   |
| D        | `-type l` でシンボリックリンクを検索（正しい）                        | ✅   |

---

### 使用例

```bash
# カレントディレクトリ以下のシンボリックリンクをすべて表示
find . -type l
```

## CDROMをアンマウントしようとした際に「ビジー」で失敗した場合、使用しているプロセスを調べるコマンド

### 問題

CDROM をアンマウントしようとしたところ「ビジー（使用中）」のため失敗しました。  
CDROM を使用しているプロセスを調べるためのコマンドを空欄に補って完成させてください：

```bash
___ +f -- /dev/cdrom
```

---

### 正解

✅ lsof

---

### 解説

lsof は「List Open Files」の略で、ファイルやデバイスを使用しているプロセスを一覧表示するコマンドです。+f -- を指定することで、特定のファイルシステムやデバイスに対する使用中のプロセスを表示できます。

このコマンドにより、どのプロセスが /dev/cdrom を使用しているかを確認できます。

---

### 完成形

```
lsof +f -- /dev/cdrom
```

---

### 使用例

```
# CDROMを使用しているプロセスを確認
sudo lsof +f -- /dev/cdrom

# プロセスを確認したうえでkillすればアンマウント可能
sudo umount /dev/cdrom
```

## GPG設定ファイルとキー・リングが保存されているユーザホームの下のディレクトリはどこですか？（1つ選択）

### 問題

GPG（GNU Privacy Guard）の設定ファイルや鍵（キー・リング）が保存されている**ユーザホームディレクトリ以下のディレクトリ**はどれですか？**1つ選びなさい。**

---

### 選択肢

- A. `~/gpg.d`
- B. `~/.gnupg`
- C. `~/gnupg`
- D. `~/.gng`

---

### 正解

✅ **B. ~/.gnupg**

---

### 解説

GPG（GNU Privacy Guard）の**設定ファイルや鍵のデータ（公開鍵・秘密鍵など）**は、ユーザのホームディレクトリ配下の `~/.gnupg` ディレクトリに保存されます。

このディレクトリには以下のようなファイルが含まれます：

| ファイル名           | 内容                 |
| -------------------- | -------------------- |
| `pubring.kbx`        | 公開鍵の格納ファイル |
| `private-keys-v1.d/` | 秘密鍵のディレクトリ |
| `gpg.conf`           | GPGの設定ファイル    |
| `trustdb.gpg`        | 鍵の信頼レベル情報   |

---

### 使用例

```bash
# ユーザのGPG設定ディレクトリを表示
ls ~/.gnupg

# GPGの設定ファイルを表示
cat ~/.gnupg/gpg.conf
```

## GPGを使用して公開鍵暗号により送信者がデータを暗号化する手順について（1つ選択）

### 問題

送信者 `ryo@mylpic.com` が、受信者 `yuko@mylpic.com` に対してファイル `secret-document.txt` を**GPGの公開鍵暗号方式で暗号化**したい。正しいコマンドを1つ選びなさい。

---

### 選択肢

- A. `gpg --encrypt --recipient yuko@mylpic.com secret-document.txt`
- B. `gpg --encrypt --export ryo@mylpic.com secret-document.txt`
- C. `gpg --decrypt --recipient yuko@mylpic.com secret-document.txt`
- D. `gpg --decrypt --export ryo@mylpic.com secret-document.txt`

---

### 正解

✅ **A. gpg --encrypt --recipient yuko@mylpic.com secret-document.txt**

---

### 解説

公開鍵暗号では、**受信者の公開鍵で暗号化**し、**受信者の秘密鍵で復号**します。  
したがって、送信者は `--encrypt` オプションを使って、**受信者のメールアドレス（キーID）を `--recipient` に指定**します。

| オプション    | 説明                                           |
| ------------- | ---------------------------------------------- |
| `--encrypt`   | ファイルを暗号化する                           |
| `--recipient` | 暗号化に使用する相手（受信者）の公開鍵を指定   |
| `--export`    | 鍵そのものをエクスポートする（今回は関係なし） |
| `--decrypt`   | 復号する（今回は不要）                         |

---

### 補足：公開鍵暗号の基本流れ

1. **送信者**は**受信者の公開鍵**で暗号化
2. **受信者**は**自分の秘密鍵**で復号

---

### 使用例

```bash
# yukoさんの公開鍵がインポート済みである前提
gpg --encrypt --recipient yuko@mylpic.com secret-document.txt
```

## すべての一般ユーザの対話的なログインを一時的に中止するファイル名は？

### 問題

すべての**一般ユーザの対話的なログインを一時的に中止**するために使用される、`/etc/` 配下のファイル名を記述してください。

---

### 正解

✅ **/etc/nologin**

---

### 解説

`/etc/nologin` ファイルが存在すると、**root以外のユーザは対話的ログインができなくなります**。これはシステムメンテナンス中など、一時的にログインを制限したいときに使用されます。

ファイルの中身には、ログイン拒否時に表示するメッセージを記述することも可能です。

---

### 使用例

```bash
# 一般ユーザのログインを停止（ファイル作成）
sudo touch /etc/nologin

# メッセージ付きでログインを拒否
echo "システムメンテナンス中です。" | sudo tee /etc/nologin

# ログイン再開（ファイル削除）
sudo rm /etc/nologin
```

## lastコマンドが参照するファイルは？（絶対パスで記述）

### 問題

`last` コマンドが参照する、**ログイン履歴情報を保存しているファイルの絶対パス**を記述してください。

---

### 正解

✅ **/var/log/wtmp**

---

### 解説

- `last` コマンドは、システムにログインしたユーザの履歴を表示するためのコマンドです。
- この情報は、**バイナリ形式のログファイル `/var/log/wtmp`** に保存されています。

その他の関連ファイル：

| ファイル        | 説明                                       |
| --------------- | ------------------------------------------ |
| `/var/log/wtmp` | ログイン／ログアウト履歴（`last` が参照）  |
| `/var/log/btmp` | 不正ログイン試行の記録（`lastb` が参照）   |
| `/var/log/utmp` | 現在ログイン中のユーザ情報（`who` が参照） |

---

### 使用例

```bash
# ログイン履歴を表示
last

# バイナリファイルの確認（中身はテキストで見られない）
ls -l /var/log/wtmp
```

## プログラムのリソースなどを制限するコマンドは何ですか？

### 問題

プログラムの**CPU時間やメモリ使用量などのリソースを制限**するために使用するコマンドは何ですか？コマンド名を記述してください。

---

### 正解

✅ **ulimit**

---

### 解説

`ulimit` コマンドは、シェル環境においてユーザプロセスに対して使用できる**システムリソースの上限（制限）**を設定または表示するために使用されます。

制限できる主なリソースの例：

| オプション | 制限するリソースの種類               |
| ---------- | ------------------------------------ |
| `-c`       | コアダンプファイルのサイズ           |
| `-f`       | 作成できる最大ファイルサイズ         |
| `-n`       | 同時に開けるファイルディスクリプタ数 |
| `-u`       | 起動可能なプロセス数                 |
| `-t`       | 実行可能な最大CPU時間（秒）          |

---

### 使用例

```bash
# 現在の設定を表示
ulimit -a

# 最大ファイルサイズを 100KB に制限
ulimit -f 100

# プロセス数の上限を 50 に設定
ulimit -u 50
```
