---
author: Taro Gray
pubDatetime: 2025-04-10T08:00:00.000Z
title: Lpic102_シェル、スクリプト（主題105）
postSlug: linuc1-102-Shell
featured: true
ogImage: https://github.com/satnaing/astro-paper/assets/53733092/1ef0cf03-8137-4d67-ac81-84a032119e3a
tags:
  - Linux
description: Lpic102_シェル、スクリプト（主題105）
---

## Table of contents

## システム起動に必要なファイルが格納されるディレクトリはどれか？

### 問題

Linuxカーネルなど、**システムを起動するために必須のファイル**が格納されるディレクトリは次のうちどれか。

---

### 選択肢

- A. `/etc`
- B. `/boot`
- C. `/sbin`
- D. `/dev`
- E. `/bin`

---

### 正解

✅ **B. `/boot`**

---

### 解説

| ディレクトリ | 役割                                                                                                                                                                     |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `/boot`      | Linuxカーネル（`vmlinuz`）、初期RAMディスク（`initrd` または `initramfs`）、ブートローダ（GRUB）の設定ファイルなど、**起動に必要なファイル**を格納する重要なディレクトリ |
| `/etc`       | 設定ファイルを格納（例：`/etc/fstab`, `/etc/hostname` など）                                                                                                             |
| `/sbin`      | システム管理用のコマンドを格納（`mount`, `reboot`, `ifconfig` など）                                                                                                     |
| `/dev`       | デバイスファイルを格納（仮想ファイル、例：`/dev/sda`, `/dev/null`）                                                                                                      |
| `/bin`       | 一般ユーザー・管理者が共通で使う基本コマンド（`ls`, `cp`, `mv` など）を格納                                                                                              |

---

### まとめ

- Linuxカーネル・ブートローダ・初期RAMディスク → **`/boot`**
- 設定ファイル → `/etc`
- デバイスファイル → `/dev`
- システムコマンド → `/sbin`, `/bin`

```bash
ls /boot
```

カーネルやGRUBのファイルが表示される

✅ 起動に必要なファイルは /boot にあることを覚えておこう！

---

## 対話型シェルを起動した際に読み込まれるファイルはどれか（2つ選択）

### 問題

対話型シェル（ログインなし）の **bash** を起動した際に読み込まれるファイルは次のうちどれか。（2つ選べ）

---

### 選択肢

- `/etc/bashrc`
- `~/.bash_history`
- `/etc/profile`
- `~/.bashrc`
- `~/.bash_logout`
- `~/.bash_profile`

---

### 正解

✅ `~/.bashrc`  
✅ `/etc/bashrc`

---

### 解説

| ファイル          | 説明                                                                                         |
| ----------------- | -------------------------------------------------------------------------------------------- |
| `/etc/bashrc`     | 対話型シェル起動時に全ユーザー共通で読み込まれる設定ファイル                                 |
| `~/.bashrc`       | 対話型シェル起動時に個人ユーザー用に読み込まれる設定ファイル                                 |
| `/etc/profile`    | **ログインシェル** 起動時に読み込まれるシステム全体の設定ファイル                            |
| `~/.bash_profile` | ログインシェル起動時にユーザーごとに読み込まれるファイル（`~/.bashrc` を呼び出すことが多い） |
| `~/.bash_logout`  | ログインシェル終了時に実行されるファイル                                                     |
| `~/.bash_history` | コマンド履歴を保存するファイル（読み込みはしない）                                           |

---

### まとめ

- 対話型シェル起動時に読み込まれる → ✅ `/etc/bashrc`, `~/.bashrc`
- ログインシェルで読み込まれるのは `/etc/profile`, `~/.bash_profile`

```bash
# 対話型シェルの確認方法
bash --noprofile --rcfile ~/.bashrc
```

✅ bash の種類（ログイン or 非ログイン）によって読み込まれるファイルが異なるので注意！

---

## パス名のワイルドカードによる展開（\*や?）を無効に設定したい。適切なコマンドは次のうちどれか。

### 問題

パス名のワイルドカード（`*`, `?` など）によるファイル名の展開（グロブ）を**無効に設定**したい。適切なコマンドはどれか。

---

### 選択肢

- `set +o noglob`
- `set +o noclobber`
- `set -o noglob`
- `set +o ignoreeof`
- `set -o noclobber`
- `set -o ignoreeof`

---

### 正解

✅ **set -o noglob**

---

### 解説

| コマンド           | 内容                                                         |
| ------------------ | ------------------------------------------------------------ |
| `set -o noglob`    | ワイルドカード（`*`, `?`）による**パス名の展開を無効**にする |
| `set +o noglob`    | グロブ展開を**再度有効化**する                               |
| `set -o noclobber` | `>` で既存ファイルを上書きすることを**防ぐ**                 |
| `set +o noclobber` | 上書き防止を**無効化**する（通常どおり `>` で上書き可能）    |
| `set -o ignoreeof` | `Ctrl + D` によるログアウト（EOF）を**無視**する             |
| `set +o ignoreeof` | `Ctrl + D` によるログアウトを**許可**する                    |

---

### まとめ

- グロブ展開（`*`, `?`）を無効にする → **`set -o noglob`**
- 上書き防止 → `set -o noclobber`
- EOF無視（`Ctrl + D`対策）→ `set -o ignoreeof`

```bash
# 実行例
set -o noglob
echo *
# 出力: * （ファイル展開されない）
```

✅ ワイルドカードの展開を一時的に止めたいときは set -o noglob を使おう！

---

## デフォルトのログインシェルの起動時に実行されるファイルのうち、ユーザー個別の環境設定をするものはどれか（2つ選択）

### 問題

**デフォルトのログインシェル**の起動時に実行されるファイルのうち、**ユーザーごとの環境設定を行うファイル**はどれか。（2つ選べ）

---

### 選択肢

- `/etc/profile`
- `~/.bash_profile`
- `~/.bash_history`
- `/etc/bashrc`
- `~/.bash_logout`
- `~/.bashrc`

---

### 正解

✅ `~/.bash_profile`  
✅ `~/.bashrc`

---

### 解説

| ファイル          | 説明                                                                                                                                           |
| ----------------- | ---------------------------------------------------------------------------------------------------------------------------------------------- |
| `~/.bash_profile` | **ログインシェル**の起動時に、ユーザー固有の初期化処理を行うファイル。`~/.bashrc` を読み込むように記述されていることが多い。                   |
| `~/.bashrc`       | **非ログインシェル**（ターミナルを新しく開いたときなど）で読み込まれるが、`~/.bash_profile` から呼び出されることでログインシェルでも使われる。 |
| `/etc/profile`    | システム全体のログインシェル設定ファイル（全ユーザー共通）                                                                                     |
| `/etc/bashrc`     | 全ユーザー共通の対話型シェル設定ファイル                                                                                                       |
| `~/.bash_history` | 実行したコマンドの履歴を保存するファイル（起動時には読み込まれない）                                                                           |
| `~/.bash_logout`  | ログインシェルを終了したときに実行されるファイル                                                                                               |

---

### まとめ

- ログインシェル起動時にユーザーごとの環境設定をする → ✅ `~/.bash_profile`, `~/.bashrc`
- システム共通設定 → `/etc/profile`, `/etc/bashrc`
- 履歴や終了時に関係 → `~/.bash_history`, `~/.bash_logout`

```bash
# ~/.bash_profile の中で ~/.bashrc を読み込む例
if [ -f ~/.bashrc ]; then
  . ~/.bashrc
fi
```

✅ ログインシェルと非ログインシェルの違いを意識して、読み込まれる設定ファイルを覚えよう！

---

## 環境変数を一時的に変更できるコマンドに「env」コマンドがあるが、オプションをつけずにコマンド実行した場合の動作について、正しいものを選べ。

### 問題

`env` コマンドを**オプションなし**で実行した場合、どのような動作をするか？

---

### 選択肢

- オプションが必要なため、エラーとなる
- オプションを要求するプロンプトが出る
- 全ての環境変数を表示する
- 環境変数が初期化される
- 何も起こらない

---

### 正解

✅ **全ての環境変数を表示する**

---

### 解説

`env` コマンドは、環境変数を変更してコマンドを実行したり、環境変数の一覧を確認するために使用されます。

```bash
# オプションなしで実行すると…
env
```

この場合、現在のシェルで設定されている全ての環境変数が表示されます。

```
動作内容	説明
env	現在の環境変数の一覧を表示する
env VAR=value cmd	環境変数 VAR を一時的に設定して cmd を実行する
printenv	特定の環境変数を表示する（例：printenv PATH）
```

まとめ - env 単体 → ✅ 全ての環境変数を表示する - 一時的に環境変数を変更してコマンドを実行 → env VAR=value command - 環境変数を確認・デバッグするのに便利！

env

# 例:

# PATH=/usr/local/bin:/usr/bin:...

# HOME=/home/user

# SHELL=/bin/bash

✅ 環境変数の確認には env を使ってみよう！

---

## あるコマンドのエイリアスを全ユーザで使用するように設定しておきたい。次のどのファイルを編集すべきか。

### 問題

`ll` や `grep` に色をつけるなど、**あるコマンドのエイリアスを全ユーザで使用できるようにしたい**。設定すべきファイルはどれか。

---

### 選択肢

- `~/.bash_history`
- `~/.bash_profile`
- `/etc/bashrc`
- `/etc/profile`
- `~/.bash_logout`
- `~/.bashrc`

---

### 正解

✅ **/etc/bashrc**

---

### 解説

| ファイル          | 説明                                                                                               |
| ----------------- | -------------------------------------------------------------------------------------------------- |
| `/etc/bashrc`     | **すべてのユーザー**に共通の対話型シェル設定ファイル。エイリアスやプロンプト設定などを記述できる。 |
| `/etc/profile`    | 全ユーザー共通のログインシェル設定ファイル。環境変数などの基本的な設定向け。                       |
| `~/.bashrc`       | ユーザー個別の対話型シェル設定ファイル。エイリアスやプロンプトの設定を記述する場所。               |
| `~/.bash_profile` | ユーザー個別のログインシェル設定ファイル。通常、`~/.bashrc` を呼び出す。                           |
| `~/.bash_logout`  | ログインシェル終了時に実行されるファイル。                                                         |
| `~/.bash_history` | コマンド履歴を保存するファイルであり、設定ファイルではない。                                       |

---

### まとめ

- **全ユーザー向けのエイリアスや設定** → ✅ `/etc/bashrc`
- **個人用の対話型設定** → `~/.bashrc`
- **ログイン時の設定** → `/etc/profile`, `~/.bash_profile`

```bash
# 例: /etc/bashrc にエイリアスを追加
alias ll='ls -l --color=auto'
alias grep='grep --color=auto'
```

✅ 全ユーザー共通の設定をしたいときは /etc/bashrc を編集しよう！

---

## bashのログイン時、環境設定ファイルを読み込む順番で正しいものを答えなさい。

### 問題

bashの**ログイン時**に実行される、**環境設定ファイルの読み込み順**として正しいものはどれか。

---

### 選択肢

1. 「/etc/bashrc」→「~/.bash_profile」→「~/.bashrc」→「/etc/profile」
2. 「~/.bash_profile」→「/etc/profile」→「~/.bash_login」→「~/.profile」
3. 「/etc/profile」→「~/.bashrc」→「~/.bash_profile」→「/etc/bashrc」
4. 「/etc/profile」→「~/.bash_profile」→「~/.bashrc」→「/etc/bashrc」
5. 「~/.profile」→「/etc/profile」→「~/.bash_profile」→「~/.bash_login」

---

### 正解

✅ **4. 「/etc/profile」→「~/.bash_profile」→「~/.bashrc」→「/etc/bashrc」**

---

### 解説

ログインシェルとして `bash` を起動した場合、以下の順で設定ファイルが読み込まれます：

1. `/etc/profile`

   - システム全体に共通するログイン設定ファイル。

2. `~/.bash_profile`

   - ユーザーごとのログインシェル設定ファイル。ここから `~/.bashrc` を呼び出すのが一般的。

3. `~/.bashrc`

   - 通常は**非ログインシェル**用だが、`~/.bash_profile` から呼び出されることでログイン時にも読み込まれる。

4. `/etc/bashrc`
   - 全ユーザーに共通する対話型シェル用の設定ファイル。ディストリビューションによって呼び出され方が異なる。

---

### まとめ

- bash ログインシェル時の読み込み順は → ✅ `/etc/profile` → `~/.bash_profile` → `~/.bashrc` → `/etc/bashrc`
- 実際には `~/.bash_profile` に `~/.bashrc` を読み込む処理を記述していることが多い。

```bash
# ~/.bash_profile によくある記述
if [ -f ~/.bashrc ]; then
  . ~/.bashrc
fi
```

✅ シェルの種類によって読み込まれる設定ファイルが異なることをしっかり理解しよう！

---

## bashにおける環境設定ファイルについて正しいものはどれか。(3つ選択)

### 問題

bash における **環境設定ファイル** に関して、正しいものを3つ選べ。

---

### 選択肢

- bashが解釈できる構文のシェルスクリプトである
- 「~/.bash_profile」が無い場合は次に「~/.bash_login」を読み込む
- 「~/.bash_profile」が無い場合は次に「~/.profile」を読み込む
- 「~/.bash_profile」「~/.bash_login」「~/.profile」の順に**全て**読み込む
- ファイルに実行権が必要である
- ログインシェル起動時に「/etc/profile」を最初に読み込む

---

### 正解

✅ bashが解釈できる構文のシェルスクリプトである  
✅ 「~/.bash_profile」が無い場合は次に「~/.bash_login」を読み込む  
✅ ログインシェル起動時に「/etc/profile」を最初に読み込む

---

### 解説

| 正しい選択肢                                                   | 説明                                                                                                   |
| -------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------ |
| bashが解釈できる構文のシェルスクリプトである                   | 環境設定ファイルは `.bashrc`, `.bash_profile` など、すべて bash で解釈可能なスクリプトとして記述される |
| 「~/.bash_profile」が無い場合は次に「~/.bash_login」を読み込む | bash はログイン時にこの順で設定ファイルを探す（次点で `~/.profile`）                                   |
| ログインシェル起動時に「/etc/profile」を最初に読み込む         | システム共通の初期設定が最初に適用される                                                               |

---

### 不正解の解説

- 「~/.bash_profile」「~/.bash_login」「~/.profile」の順に**全て**読み込む → **最初に見つかった1つだけ**が読み込まれ、それ以降は無視される。
- ファイルに実行権が必要である → 読み込みには **実行権は不要**。bash がソースとして読み込むだけなので、読み取り権限があればよい。

---

### まとめ

- bash の環境設定ファイルは **通常のシェルスクリプト**
- **ログイン時の優先順位**：
  1. `~/.bash_profile`
  2. `~/.bash_login`
  3. `~/.profile`
- システム共通の設定 → `/etc/profile`（最初に読み込まれる）

```bash
# ~/.bash_profile がない場合に ~/.bash_login が使われる
# ただし、最初に見つかったファイルのみ有効！
```

✅ ファイルの読み込み順と、実行権の有無についてしっかり理解しよう！

---

## Linuxの標準シェル bash の設定ファイル「~/.bashrc」について、正しく述べているものを選択しなさい。

### 問題

Linuxの標準シェル `bash` の設定ファイル「~/.bashrc」について、**正しい説明**を1つ選べ。

---

### 選択肢

- 対話型シェル起動時のみ使用される
- ログインシェル起動時に「~/.bash_profile」または「~/.profile」から読み込まれる
- ログインシェル起動時にbashが直接読み込むファイルである
- 対話型シェル起動時に「/etc/bash.bashrc」から読み込まれ、自身は「/etc/bashrc」を読み込む

---

### 正解

✅ **ログインシェル起動時に「~/.bash_profile」または「~/.profile」から読み込まれる**

---

### 解説

| 説明内容                                                                                | 正誤 | 理由                                                                                                                      |
| --------------------------------------------------------------------------------------- | ---- | ------------------------------------------------------------------------------------------------------------------------- |
| 対話型シェル起動時のみ使用される                                                        | ❌   | 対話型・非ログインシェル時に使用されるが、「のみ」は誤り。ログインシェルでも `.bash_profile` から呼び出されることが多い。 |
| ログインシェル起動時に「~/.bash_profile」または「~/.profile」から読み込まれる           | ✅   | `.bashrc` はログインシェルで直接読み込まれないが、`.bash_profile` や `.profile` から明示的に読み込まれるケースが多い。    |
| ログインシェル起動時に bash が直接読み込むファイルである                                | ❌   | ログインシェルで直接読み込むのは `.bash_profile` 等であり、`.bashrc` は対象外。                                           |
| 対話型シェル起動時に「/etc/bash.bashrc」から読み込まれ、自身は「/etc/bashrc」を読み込む | ❌   | `/etc/bash.bashrc` は Debian 系の挙動で、`.bashrc` とは別の処理。`~/.bashrc` が `/etc/bashrc` を読み込む構成ではない。    |

---

### まとめ

- `.bashrc` は **対話型・非ログインシェル**用の設定ファイル
- ログインシェルでも `~/.bash_profile` などから **明示的に読み込まれる**
- `.bashrc` の典型的な使い方：

```bash
# ~/.bash_profile の中で ~/.bashrc を読み込む例
if [ -f ~/.bashrc ]; then
  . ~/.bashrc
fi
```

✅ .bashrc はログインシェル単体では読み込まれないことに注意！

---
